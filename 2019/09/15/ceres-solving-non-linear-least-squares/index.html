<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/source/images/favicon-32x32-me.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/source/images/favicon-16x16-me.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="非线性最小二乘问题求解 引言 有效使用Ceres需要熟悉非线性最小二乘求解器的一些基础组成部分，所以在描述怎么配置和使用求解器之前，先来简单看一下Ceres中的一些核心优化算法是如何工作的。 令 \(x \in \mathbb{R}^n\) 是变量的一个 \(n\) 维向量， \(F(x) &#x3D; \left[f_1(x), ... , f_{m}(x) \right]^{\top}\) 是 \(x\">
<meta property="og:type" content="article">
<meta property="og:title" content="ceres-Solving non-linear least squares problem">
<meta property="og:url" content="http://example.com/2019/09/15/ceres-solving-non-linear-least-squares/index.html">
<meta property="og:site_name" content="Meng&#39;s Blog">
<meta property="og:description" content="非线性最小二乘问题求解 引言 有效使用Ceres需要熟悉非线性最小二乘求解器的一些基础组成部分，所以在描述怎么配置和使用求解器之前，先来简单看一下Ceres中的一些核心优化算法是如何工作的。 令 \(x \in \mathbb{R}^n\) 是变量的一个 \(n\) 维向量， \(F(x) &#x3D; \left[f_1(x), ... , f_{m}(x) \right]^{\top}\) 是 \(x\">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-09-15T09:40:21.000Z">
<meta property="article:modified_time" content="2021-10-01T19:49:30.625Z">
<meta property="article:author" content="Meng Zhili">
<meta property="article:tag" content="non-linear least squares">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2019/09/15/ceres-solving-non-linear-least-squares/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>ceres-Solving non-linear least squares problem | Meng's Blog</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Meng's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">To be rock not to roll</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E9%97%AE%E9%A2%98%E6%B1%82%E8%A7%A3"><span class="nav-number">1.</span> <span class="nav-text">非线性最小二乘问题求解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E8%A8%80"><span class="nav-number">1.1.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E8%B5%96%E5%9F%9F%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.</span> <span class="nav-text">信赖域方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#dogleg"><span class="nav-number">1.2.1.</span> <span class="nav-text">Dogleg</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#inner-iterations"><span class="nav-number">1.2.2.</span> <span class="nav-text">Inner Iterations</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#non-monotonic-steps"><span class="nav-number">1.2.3.</span> <span class="nav-text">Non-monotonic Steps</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#line-search-method"><span class="nav-number">1.3.</span> <span class="nav-text">Line Search Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linearsolver"><span class="nav-number">1.4.</span> <span class="nav-text">LinearSolver</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Meng Zhili"
      src="/images/blog-logo.jpg">
  <p class="site-author-name" itemprop="name">Meng Zhili</p>
  <div class="site-description" itemprop="description">focus creates reality</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zhilimeng" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhilimeng" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mengzhili_whu@163.com/" title="E-Mail → https:&#x2F;&#x2F;mengzhili_whu@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/09/15/ceres-solving-non-linear-least-squares/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/blog-logo.jpg">
      <meta itemprop="name" content="Meng Zhili">
      <meta itemprop="description" content="focus creates reality">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Meng's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ceres-Solving non-linear least squares problem
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-15 09:40:21" itemprop="dateCreated datePublished" datetime="2019-09-15T09:40:21+00:00">2019-09-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-10-01 19:49:30" itemprop="dateModified" datetime="2021-10-01T19:49:30+00:00">2021-10-01</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/SLAM/" itemprop="url" rel="index"><span itemprop="name">SLAM</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="非线性最小二乘问题求解">非线性最小二乘问题求解</h2>
<h3 id="引言">引言</h3>
<p>有效使用Ceres需要熟悉非线性最小二乘求解器的一些基础组成部分，所以在描述怎么配置和使用求解器之前，先来简单看一下Ceres中的一些核心优化算法是如何工作的。</p>
<p>令 <span class="math inline">\(x \in \mathbb{R}^n\)</span> 是变量的一个 <span class="math inline">\(n\)</span> 维向量， <span class="math inline">\(F(x) = \left[f_1(x), ... , f_{m}(x) \right]^{\top}\)</span> 是 <span class="math inline">\(x\)</span> 的 <span class="math inline">\(m\)</span> 维函数。优化问题描述如下： <span class="math display">\[ 
\begin{split}\arg \min_x \frac{1}{2}\|F(x)\|^2  \\
L \le x \le U\end{split}  \tag{1}
\]</span><br />
这里， <span class="math inline">\(L\)</span> 和 <span class="math inline">\(U\)</span> 是参数向量 <span class="math inline">\(x\)</span> 的上下边界。</p>
<p>由于对于一般的 <span class="math inline">\(F(x)\)</span> ，很难有有效的全局最小化方法，一般通过寻找局部最小化来解决。 <span class="math inline">\(F(x)\)</span> 的雅可比矩阵 <span class="math inline">\(J(x)\)</span> 是一个 <span class="math inline">\(m \times n\)</span> 的矩阵。这里， <span class="math inline">\(J_{ij}(x) = \partial_j f_i(x)\)</span> ，梯度向量为 <span class="math inline">\(g(x) = \nabla \frac{1}{2}\|F(x)\|^2 = J(x)^\top F(x)\)</span>。</p>
<p>解决非线性优化问题的一般策略是通过解决原始问题的一系列近似。在一次迭代中，求解近似来得到向量 <span class="math inline">\(x\)</span> 的一个校正量 <span class="math inline">\(\Delta x\)</span>，对于非线性最小二乘，通过线性化来构造近似 <span class="math inline">\(F(x+\Delta x) \approx F(x) + J(x)\Delta x\)</span>，这就得到了下边的线性最小二乘问题：</p>
<p><span class="math display">\[
 \min_{\Delta x} \frac{1}{2}\|J(x)\Delta x + F(x)\|^2\quad(2)
 \]</span> 不幸的是，简单地求解一系列这些问题并更新 <span class="math inline">\(x \leftarrow x+ \Delta x\)</span> 会导致算法不收敛。为了得到一个收敛的算法，我们需要控制步长 <span class="math inline">\(\Delta x\)</span> 的大小。 根据如何控制步长 <span class="math inline">\(\Delta x\)</span> 的大小，非线性优化算法可以分为两大类： 1. <strong>信赖域（Trust Region)</strong> 信赖域方法在搜索空间（称为信赖域）的一个子集上利用模型函数来近似目标函数，如果模型函数成功地最小化真正地目标函数，信赖域就会扩大，反之缩小，再次求解模型优化问题。 2. <strong>线搜索（Line Search)</strong> 线搜索方法首先找到目标函数减少的下降方向，然后计算决定朝下降方向移动移动的步长大小。下降方向可以由多种方法计算，例如梯度下降法， Newton's method 和 Quasi-Newton 方法。</p>
<p>信赖域方法首先选择一个步长大小然后是步长方向，而线搜索方法首先选择步长方向然后是步长大小。</p>
<h3 id="信赖域方法">信赖域方法</h3>
<p>基本的信赖域方法流程如下： 1. 给定一个初始点 <span class="math inline">\(x\)</span> 和 一个信赖域半径 <span class="math inline">\(\mu\)</span> 。 2. 求解 <span class="math display">\[\begin{split}\arg \min_{\Delta x}&amp; \frac{1}{2}\|J(x)\Delta x + F(x)\|^2 \\ \text{such that} &amp;\|D(x)\Delta x\|^2 \le \mu\\
     &amp;L \le x + \Delta x \le U.\end{split}
     \]</span> 3. <span class="math display">\[
      \rho = \frac{\displaystyle \|F(x + \Delta x)\|^2 -
       \|F(x)\|^2}{\displaystyle \|J(x)\Delta x + F(x)\|^2 -
       \|F(x)\|^2}
      \]</span> 4. 如果 <span class="math inline">\(\rho &gt; \epsilon\)</span> 则 <span class="math inline">\(x = x + \Delta x\)</span> 5. 如果 <span class="math inline">\(\rho &gt; \eta_1\)</span> 则 <span class="math inline">\(\mu = 2\mu\)</span> 6. 如果 <span class="math inline">\(\rho &lt; \eta_2\)</span> 则 <span class="math inline">\(\mu = 0.5 * \mu\)</span> 7. 返回第二步 这里，<span class="math inline">\(\mu\)</span> 是信赖域半径， <span class="math inline">\(D(x)\)</span> 矩阵定义了 <span class="math inline">\(F(x)\)</span> 域上的度量。<span class="math inline">\(\rho\)</span> 测量步长 <span class="math inline">\(\Delta x\)</span> 的质量，例如，线性模型在非线性目标值里预测下降有多好。通过线性化预测非线性目标的行为有多好来决定增大或减小信赖域的范围。</p>
<p>信赖域方法的关键步骤求解带约束的优化问题 <span class="math display">\[
\begin{split}\arg \min_{\Delta x}&amp;\quad \frac{1}{2}\|J(x)\Delta x + F(x)\|^2 \\
\text{such that} &amp;\quad \|D(x)\Delta x\|^2 \le \mu\\
 &amp;\quad L \le x + \Delta x \le U.\end{split}\quad (3)
\]</span> Ceres实现了两种信赖域方法：Levenberg-Marquardt 和 Dogleg。</p>
<p>#### Levenberg-Marquardt Levenberg-Marquardt 是求解非线性最小二乘问题的最流行的算法。求解问题（3）可以通过求解下边形式的无约束优化问题： <span class="math display">\[\arg\min_{\Delta x} \frac{1}{2}\|J(x)\Delta x + F(x)\|^2 +\lambda  \|D(x)\Delta x\|^2\]</span> 这里， <span class="math inline">\(\lambda\)</span> 是拉格朗日乘数是 <span class="math inline">\(\mu\)</span>的逆，在Ceres中， 求解： <span class="math display">\[\arg\min_{\Delta x} \frac{1}{2}\|J(x)\Delta x + F(x)\|^2 + \frac{1}{\mu} \|D(x)\Delta x\|^2\quad(4)\]</span> 矩阵 <span class="math inline">\(D(x)\)</span> 是一个非负对角阵， 通常是 <span class="math inline">\(J(x)^\top J(x)\)</span> 的对角阵的平方根。</p>
<p>在进行下一步之前，我们先简化一些表示。假设矩阵 <span class="math inline">\(\frac{1}{\sqrt{\mu}} D\)</span> 已经添加到矩阵 <span class="math inline">\(J\)</span> 的底部，相似的，零向量也被添加到向量 <span class="math inline">\(f\)</span> 的底部。 下边的讨论将使用 <span class="math inline">\(J\)</span> 和 <span class="math inline">\(f\)</span> ： <span class="math display">\[\min_{\Delta x} \frac{1}{2} \|J(x)\Delta x + f(x)\|^2 \quad (5)\]</span> Ceres提供两类方法来解决问题（5）- 分解和迭代。</p>
<p>分解法利用Cholesky 和 QR 分解来计算精确解。但是不清楚问题（4）的精确解在求解问题（1）时LM算法的的每一步是否是必须的。</p>
<p>不精确的牛顿法需要两部分。首先，一种近似求解线性方程组的廉价方法。例如，像Conjugate Gradients方法这样的迭代线性求解器。 第二，迭代求解器的终止规则。 典型的终止规则是下边的形式： <span class="math display">\[\|H(x) \Delta x + g(x)\| \leq \eta_k \|g(x)\|\quad(6)\]</span> 这里，<span class="math inline">\(k\)</span> 表示LM迭代次数。</p>
<h4 id="dogleg">Dogleg</h4>
<p>另外一种求解信赖域问题的策略由M.J.D.Powell引入。关键思想是计算两个向量： <span class="math display">\[\begin{split}\Delta x^{\text{Gauss-Newton}} &amp;= \arg \min_{\Delta x}\frac{1}{2} \|J(x)\Delta x + f(x)\|^2.\\
\Delta x^{\text{Cauchy}} &amp;= -\frac{\|g(x)\|^2}{\|J(x)g(x)\|^2}g(x).\end{split}\]</span> 注意向量 <span class="math inline">\(\Delta x^{\text{Gauss-Newton}}\)</span> 是问题（2）的解，<span class="math inline">\(\Delta x^{\text{Cauchy}}\)</span> 是最小化线性近似的向量如果我们限制朝着梯度方向移动。Dogleg方法寻找由 <span class="math inline">\(\Delta x^{\text{Gauss-Newton}}\)</span> 定义的向量 <span class="math inline">\(\Delta x\)</span> 和 <span class="math inline">\(\Delta x^{\text{Cauchy}}\)</span> 来解决信赖域问题。</p>
<h4 id="inner-iterations">Inner Iterations</h4>
<p>一些非线性最小二乘问题在参数块相互作用的方式上有额外的结构，这有利于改变信赖域步骤计算的方式。例如，考虑下边的回归问题： <span class="math display">\[y = a_1 e^{b_1 x} + a_2 e^{b_3 x^2 + c_1}\]</span> 给定一个 <span class="math inline">\(\{(x_i, y_i)\}\)</span> 的集合，用户想要估计 <span class="math inline">\(a_1, a_2, b_1, b_2\)</span> 和 <span class="math inline">\(c_1\)</span> 。</p>
<p>注意到表达式左边在<span class="math inline">\(a_1\)</span> 和 <span class="math inline">\(a_2\)</span> 上是线性的，给定任意的 <span class="math inline">\(b_1, b_2, c_1\)</span> ，可以用线性回归来估计 <span class="math inline">\(a_1\)</span> 和 <span class="math inline">\(a_2\)</span> 的最优值，从问题中完全解析地消除变量 <span class="math inline">\(a_1\)</span> 和 <span class="math inline">\(a_2\)</span> 是可能地。 像这样地问题称为可分离地最小二乘问题，求解这类问题最有名的算法是由Golub和Pereyra提出的Variable Projection 算法。 相似的结构可以在带有丢失数据问题的矩阵分解中找到，相应的算法叫做Wiberg's算法。</p>
<p>将<code>Solver::Options::use_inner_iterations</code>设置为<code>true</code>可以启用Ruhe&amp;Wedin's Algorithm II。Ceres版本具有更高的迭代复杂度，但是每次迭代中也会更好地收敛。</p>
<h4 id="non-monotonic-steps">Non-monotonic Steps</h4>
<p>注意上述的信赖域方法是一个下降算法只接受使目标函数值严格减少的点。放宽这个条件可以使算法在长期内更有效，代价是目标函数的值会在局部增大。这是因为允许非下降的目标函数值可以使算法跳过巨石，因为该方法不限于移动到窄谷中同时保持其收敛特性。</p>
<p>将<code>Solver::Options::use_nonmonotonic_steps</code>设置为<code>true</code>可以启用非单调信赖域算法。</p>
<h3 id="line-search-method">Line Search Method</h3>
<p>Ceres中的线搜索方法目前还不能处理边界约束，所以只可以用来求解无约束问题。线搜索算法步骤如下： 1. 给定一个初始点 <span class="math inline">\(x\)</span> 2. <span class="math inline">\(\Delta x = -H^{-1}(x) g(x)\)</span> 3. <span class="math inline">\(\arg \min_\mu \frac{1}{2} \| F(x + \mu \Delta x) \|^2\)</span> 4. <span class="math inline">\(x = x + \mu \Delta x\)</span> 5. 返回到步骤2 这里 <span class="math inline">\(H(x)\)</span> 使目标函数的黑塞矩阵的近似估计，<span class="math inline">\(g(x)\)</span> 是在 <span class="math inline">\(x\)</span> 处的梯度。根据 <span class="math inline">\(H(x)\)</span> 的选择，我们可以得到各种不同的搜索方向 <span class="math inline">\(\Delta x\)</span> 。目前，Ceres支持三种搜索方向。 1. <code>STEEPEST_DESCENT</code> 这对应于选择 <span class="math inline">\(H(x)\)</span> 为单位矩阵。除了对最简单的问题外，这不是一个好的搜索方向。 2. <code>NONLINEAR_CONJUGATE_GRADIENT</code> 共轭梯度法对非线性函数的一般化，可以以不同方式执行，导致不同的搜索方向。Ceres 目前支持 <code>FLETCHER_REEVES</code>，<code>POLAK_RIBIERE</code> 和 <code>HESTENES_STIEFEL</code> 方向。 3. <code>BFGS</code> Secant方法对多维的一般化，其中维持了逆黑塞矩阵的一个完全密集近似用于计算quasi-Newton 步骤 4. <code>LBFGS</code> <code>BFGS</code>的有限近似方法。</p>
<h3 id="linearsolver">LinearSolver</h3>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Meng Zhili
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://example.com/2019/09/15/ceres-solving-non-linear-least-squares/" title="ceres-Solving non-linear least squares problem">http://example.com/2019/09/15/ceres-solving-non-linear-least-squares/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/non-linear-least-squares/" rel="tag"># non-linear least squares</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/05/12/ceres-modeling-non-linear-least-squares/" rel="prev" title="Ceres-Modeling Non-Linear Least Squares">
                  <i class="fa fa-chevron-left"></i> Ceres-Modeling Non-Linear Least Squares
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/01/05/ndt-registration/" rel="next" title="ndt-registration">
                  ndt-registration <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Meng Zhili</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  




  <script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'none'
      },
      options: {
        renderActions: {
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              const target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    const script = document.createElement('script');
    script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
    script.defer = true;
    document.head.appendChild(script);
  } else {
    MathJax.startup.document.state(0);
    MathJax.typesetClear();
    MathJax.texReset();
    MathJax.typeset();
  }
</script>



</body>
</html>
